import{r as s,j as e,aq as c}from"./vendor-mRmXoTzJ.js";import{C as u,a as f,B as t,A as p}from"./AppFooter-DFZVLD4-.js";import{I as F}from"./input-BEO2FNV-.js";import{u as I}from"./request-B6uIehoa.js";import{u as T}from"./Api-xMS5vTWo.js";import{A as h}from"./AppHeader-D4NPA-3f.js";import{c as B,a as P,u as W}from"./router-b8HoQcXb.js";import{c as M,a as z,d as k,e as G}from"./icons-LK5f2ZN2.js";import"./radix-Ba4cyD9q.js";import"./index-DpC4sAuN.js";const H="bg-zinc-50 border-zinc-200 text-zinc-900 focus-visible:ring-purple-500 dark:bg-white/5 dark:border-white/10 dark:text-zinc-100";function _(){const{token:o}=B(),y=P(),r=W(),b=I(),C=T(),[V,d]=s.useState(!1),[j,g]=s.useState(!1),[l,E]=s.useState(""),[L,S]=s.useState(!1),[q,v]=s.useState(null),[A,x]=s.useState(!1),N=s.useRef(!1),m=y.pathname==="/email-not-verified",w=s.useCallback(async a=>{d(!0),v(null),x(!1),await b({method:"GET",url:`/verify-email/${a}`,successMessage:"Email verificado com sucesso!",showSuccess:!0,onAccept:i=>{i?.message==="Conta já verificada"?x(!0):S(!0),d(!1)},onReject:i=>{d(!1),i?.message==="Token de verificação inválido"?x(!0):v(i?.message||"Erro ao verificar email")}})},[b]);s.useEffect(()=>{o&&!m&&!N.current&&(N.current=!0,w(o))},[o,m,w]);const R=async()=>{if(!l){c.error("Por favor, informe seu email");return}g(!0);try{const a=await C.post("/resend-verification",{email:l});a.data?.success?c.success(a.data.message):c.error(a.data?.message??"Falha ao reenviar")}catch(a){const i=a;c.error(i?.response?.data?.message??"Erro ao reenviar email")}finally{g(!1)}};if(m)return e.jsxs("div",{className:"min-h-screen w-full transition-colors duration-500 bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(h,{backTo:"/",badgeLabel:"Verificação",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(u,{className:"w-full max-w-md border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsxs(f,{className:"p-8 text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(M,{className:"h-16 w-16 text-purple-400"})}),e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Verifique seu email"}),e.jsx("p",{className:"text-zinc-500 mb-4",children:"Sua conta ainda não foi verificada. Verifique sua caixa de entrada e clique no link que enviamos."}),e.jsx("p",{className:"text-zinc-500 mb-6",children:"Não recebeu? Informe seu email abaixo para reenviarmos o link."}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsx("label",{htmlFor:"email",className:"text-sm text-zinc-500",children:"Email"}),e.jsx(F,{id:"email",type:"email",value:l,onChange:a=>E(a.target.value),placeholder:"seu@email.com",className:H}),e.jsx(t,{onClick:R,disabled:j||!l,className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:j?e.jsx(z,{className:"h-4 w-4 animate-spin mx-auto"}):"Reenviar email de verificação"}),e.jsx(t,{onClick:()=>r("/login"),variant:"outline",className:"w-full",children:"Voltar para Login"})]})]})})}),e.jsx(p,{})]});if(V)return e.jsxs("div",{className:"min-h-screen w-full bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(h,{backTo:"/",badgeLabel:"Verificação",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(u,{className:"w-full max-w-md border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsxs(f,{className:"p-8 text-center",children:[e.jsx(z,{className:"h-16 w-16 animate-spin text-purple-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:"Verificando..."}),e.jsx("p",{className:"text-zinc-500",children:"Aguarde enquanto verificamos sua conta."})]})})}),e.jsx(p,{})]});let n;return L?n=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(k,{className:"h-16 w-16 text-emerald-500"})}),e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Email verificado!"}),e.jsx("p",{className:"text-zinc-500 mb-6",children:"Sua conta foi verificada com sucesso. Você já pode fazer login."}),e.jsx(t,{onClick:()=>r("/login"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:"Ir para Login"})]}):A?n=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(k,{className:"h-16 w-16 text-emerald-500"})}),e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Conta já verificada"}),e.jsx("p",{className:"text-zinc-500 mb-6",children:"Sua conta já foi verificada. Você pode fazer login normalmente."}),e.jsx(t,{onClick:()=>r("/login"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:"Ir para Login"})]}):n=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(G,{className:"h-16 w-16 text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Erro na verificação"}),e.jsx("p",{className:"text-zinc-500 mb-6",children:q}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{onClick:()=>r("/email-not-verified"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:"Reenviar email de verificação"}),e.jsx(t,{onClick:()=>r("/login"),variant:"outline",className:"w-full",children:"Voltar para Login"})]})]}),e.jsxs("div",{className:"min-h-screen w-full transition-colors duration-500 bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(h,{backTo:"/",badgeLabel:"Verificação",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(u,{className:"w-full max-w-md border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsx(f,{className:"p-8 text-center",children:n})})}),e.jsx(p,{})]})}export{_ as default};
