import{r as i,j as e,ap as C,aq as r}from"./vendor-mRmXoTzJ.js";import{u as L}from"./index-BYCepXWl.js";import{u as F}from"./Api-6n4J91DV.js";import{C as q,a as A,B as o,A as G}from"./AppFooter-D1BxJuTO.js";import{I as j}from"./input-CDCc1mAV.js";import{A as B}from"./AppHeader-CnLp3pGj.js";import{E as T,b as V,a as b}from"./icons-LK5f2ZN2.js";import{u as _,a as P,L as n}from"./router-b8HoQcXb.js";import"./radix-Ba4cyD9q.js";const N="bg-zinc-50 border-zinc-200 text-zinc-900 focus-visible:ring-purple-500 dark:bg-white/5 dark:border-white/10 dark:text-zinc-100";function Q(){const{login:c}=L(),[d,w]=i.useState(""),[m,v]=i.useState(""),[l,y]=i.useState(!1),[x,u]=i.useState(!1),[z,h]=i.useState(!1),p=F(),f=_(),g=P().state?.from??"/",k=async t=>{const s=t.credential;if(s){h(!0);try{const a=await p.post("/auth/google",{credential:s});a.data?.success&&a.data?.token&&a.data?.user?c(a.data.token,a.data.user,a.data.refresh_token,{redirectTo:g}):r.error("Falha ao entrar com Google")}catch(a){const S=a?.response?.data;r.error(S?.message??"Falha ao entrar com Google")}finally{h(!1)}}},E=async t=>{t.preventDefault(),u(!0);try{const s=await p.post("/login_check",{email:d,password:m});if(s.data?.requiresVerification){f("/email-not-verified");return}if(!s.data?.success){r.error(s.data?.message??"Falha ao entrar");return}c(s.data.token,s.data.user,s.data.refresh_token,{redirectTo:g})}catch(s){const a=s?.response?.data;if(a?.requiresVerification){f("/email-not-verified");return}a?.error?r.error(a.error):a?.message?r.error(a.message):r.error("Falha ao entrar. Verifique email e senha.")}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen w-full transition-colors duration-500 bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(B,{backTo:"/",badgeLabel:"Entrar",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(q,{className:"w-full max-w-sm border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsxs(A,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100 text-center",children:"Bem-vindo"}),e.jsx("p",{className:"text-center text-sm text-zinc-500 mb-4",children:"Entre na sua conta para continuar"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm text-zinc-500",children:"Email"}),e.jsx(j,{id:"email",type:"email",value:d,onChange:t=>w(t.target.value),placeholder:"seu@email.com",className:N,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm text-zinc-500",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"password",type:l?"text":"password",value:m,onChange:t=>v(t.target.value),placeholder:"••••••••",className:`pr-10 ${N}`,required:!0}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>y(!l),children:l?e.jsx(T,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})})]})]}),e.jsx(o,{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:opacity-90 text-white",children:x?e.jsx(b,{className:"h-4 w-4 animate-spin mx-auto"}):"Entrar"}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-zinc-200 dark:border-white/10"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 text-zinc-500",children:"ou"})})]}),e.jsx("div",{className:"flex justify-center",children:z?e.jsx(o,{type:"button",disabled:!0,className:"w-full",children:e.jsx(b,{className:"h-4 w-4 animate-spin"})}):e.jsx(C,{onSuccess:k,onError:()=>r.error("Falha ao entrar com Google"),useOneTap:!1,theme:"filled",size:"large",width:"100%",shape:"rectangular",text:"signin_with",locale:"pt-BR"})})]})]}),e.jsxs("div",{className:"text-center space-y-2 pt-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx(n,{to:"/register",className:"text-purple-400 hover:underline",children:"Criar conta"}),e.jsx("span",{className:"text-zinc-500",children:" · "}),e.jsx(n,{to:"/forgot-password",className:"text-purple-400 hover:underline",children:"Esqueci minha senha"})]}),e.jsx("p",{className:"text-sm",children:e.jsx(n,{to:"/",className:"text-zinc-500",children:"Voltar ao início"})})]})]})})}),e.jsx(G,{})]})}export{Q as default};
