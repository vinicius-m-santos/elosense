import{r as n,ar as V,as as q,j as e,at as p,aq as I}from"./vendor-mRmXoTzJ.js";import{C as b,a as f,B as l,A as g}from"./AppFooter-DFZVLD4-.js";import{I as P}from"./input-BEO2FNV-.js";import{B as W}from"./buttonLoader-BZMCoE2b.js";import{u as M}from"./request-B6uIehoa.js";import{A as w}from"./AppHeader-D4NPA-3f.js";import{d as O,e as Z,E as S,b as C}from"./icons-LK5f2ZN2.js";import{c as D,u as H}from"./router-b8HoQcXb.js";import"./radix-Ba4cyD9q.js";import"./index-DpC4sAuN.js";import"./Api-xMS5vTWo.js";const X=p.object({password:p.string().min(8,"A senha deve ter pelo menos 8 caracteres").regex(/[a-z]/,"A senha deve conter letras minúsculas").regex(/[A-Z]/,"A senha deve conter letras maiúsculas").regex(/[0-9]/,"A senha deve conter números"),confirmPassword:p.string().min(1,"Confirmação de senha é obrigatória")}).refine(t=>t.password===t.confirmPassword,{message:"As senhas não coincidem",path:["confirmPassword"]}),A="bg-zinc-50 border-zinc-200 text-zinc-900 focus-visible:ring-purple-500 dark:bg-white/5 dark:border-white/10 dark:text-zinc-100";function G(t){const a=[];let r=0;t.length>=8?r+=1:a.push("Pelo menos 8 caracteres"),/[a-z]/.test(t)?r+=1:a.push("Letras minúsculas"),/[A-Z]/.test(t)?r+=1:a.push("Letras maiúsculas"),/[0-9]/.test(t)?r+=1:a.push("Números"),t.length>=12&&(r+=1);let i="weak";return r>=4?i="strong":r>=3&&(i="medium"),{strength:i,score:r,feedback:a}}function ie(){const{token:t}=D(),a=H(),r=M(),[i,L]=n.useState(!1),[x,E]=n.useState(!1),[o,m]=n.useState(!1),[R,F]=n.useState(!1),[j,N]=n.useState(null),{register:v,handleSubmit:B,watch:z,trigger:k,formState:{errors:c,isValid:T}}=V({resolver:q(X),mode:"onChange"}),d=z("password",""),y=z("confirmPassword",""),s=d?G(d):null;n.useEffect(()=>{y&&k("confirmPassword")},[d,y,k]);const $=async h=>{if(!t){I.error("Token inválido");return}m(!0),N(null),await r({method:"POST",url:"/reset-password",data:{token:t,password:h.password},successMessage:"Senha redefinida com sucesso!",showSuccess:!0,onAccept:()=>{F(!0),m(!1)},onReject:u=>{m(!1),N(u.message||"Erro ao redefinir senha")}})};return R?e.jsxs("div",{className:"min-h-screen w-full transition-colors duration-500 bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(w,{backTo:"/login",badgeLabel:"Redefinir senha",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(b,{className:"w-full max-w-md border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsxs(f,{className:"p-8 text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(O,{className:"h-16 w-16 text-emerald-500 dark:text-emerald-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Senha redefinida!"}),e.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:"Sua senha foi redefinida com sucesso. Você pode fazer login com sua nova senha."}),e.jsx(l,{onClick:()=>a("/login"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:opacity-90",children:"Ir para Login"})]})})}),e.jsx(g,{})]}):j&&!o?e.jsxs("div",{className:"min-h-screen w-full transition-colors duration-500 bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(w,{backTo:"/login",badgeLabel:"Redefinir senha",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(b,{className:"w-full max-w-md border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsxs(f,{className:"p-8 text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(Z,{className:"h-16 w-16 text-red-500 dark:text-red-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Erro ao redefinir senha"}),e.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:j}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{onClick:()=>a("/forgot-password"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:opacity-90",children:"Solicitar novo link"}),e.jsx(l,{onClick:()=>a("/login"),variant:"outline",className:"w-full border-zinc-200 text-zinc-900 dark:border-white/10 dark:text-zinc-100 hover:bg-white/10",children:"Voltar para Login"})]})]})})}),e.jsx(g,{})]}):e.jsxs("div",{className:"min-h-screen w-full transition-colors duration-500 bg-zinc-100 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),e.jsx(w,{backTo:"/login",badgeLabel:"Redefinir senha",maxWidth:"max-w-6xl"}),e.jsx("main",{className:"relative z-10 flex flex-col items-center justify-center px-6 py-16",children:e.jsx(b,{className:"w-full max-w-md border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:e.jsxs(f,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 text-center mb-2",children:"Redefinir senha"}),e.jsx("p",{className:"text-center text-zinc-500 mb-6 text-sm",children:"Digite sua nova senha"}),e.jsxs("form",{onSubmit:B($),className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nova senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:i?"text":"password",id:"password",...v("password"),className:`pr-10 ${A}`,placeholder:"••••••••"}),e.jsx(l,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>L(!i),children:i?e.jsx(S,{className:"h-4 w-4 text-zinc-500"}):e.jsx(C,{className:"h-4 w-4 text-zinc-500"})})]}),c.password&&e.jsx("p",{className:"text-xs text-red-400",children:c.password.message}),s&&d&&e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsxs("div",{className:"flex gap-1 h-1.5",children:[e.jsx("div",{className:`flex-1 rounded ${s.strength==="weak"?"bg-red-500":s.strength==="medium"?"bg-amber-500":"bg-emerald-500"}`}),e.jsx("div",{className:`flex-1 rounded ${s.strength==="strong"?"bg-emerald-500":s.strength==="medium"?"bg-amber-500":"bg-zinc-300 dark:bg-zinc-700"}`}),e.jsx("div",{className:`flex-1 rounded ${s.strength==="strong"?"bg-emerald-500":"bg-zinc-300 dark:bg-zinc-700"}`})]}),e.jsxs("p",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:["Força:"," ",e.jsx("span",{className:s.strength==="weak"?"text-red-500 dark:text-red-400":s.strength==="medium"?"text-amber-500 dark:text-amber-400":"text-emerald-500 dark:text-emerald-400",children:s.strength==="weak"?"Fraca":s.strength==="medium"?"Média":"Forte"})]}),s.feedback.length>0&&e.jsx("ul",{className:"text-xs text-zinc-600 dark:text-zinc-400 list-disc list-inside",children:s.feedback.map((h,u)=>e.jsx("li",{children:h},u))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Confirmar nova senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:x?"text":"password",id:"confirmPassword",...v("confirmPassword"),className:`pr-10 ${A}`,placeholder:"••••••••"}),e.jsx(l,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>E(!x),children:x?e.jsx(S,{className:"h-4 w-4 text-zinc-500"}):e.jsx(C,{className:"h-4 w-4 text-zinc-500"})})]}),c.confirmPassword&&e.jsx("p",{className:"text-xs text-red-400",children:c.confirmPassword.message})]}),e.jsxs(l,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:opacity-90 disabled:opacity-70",disabled:o||!T,children:[!o&&"Redefinir senha",o&&e.jsx(W,{})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"button",onClick:()=>a("/login"),className:"text-sm text-purple-400 hover:underline",children:"Voltar para Login"})})]})})}),e.jsx(g,{})]})}export{ie as default};
