import{aq as n}from"./vendor-mRmXoTzJ.js";import{u as p}from"./Api-UTMYfHDj.js";function y(){const r=p();return async({method:e="get",url:i,data:l=null,params:c=null,onAccept:t=null,onReject:u=null,showSuccess:d=!1,successMessage:m="Operação realizada com sucesso",showError:f=!0})=>{try{const a=await r.request({method:e,url:i,data:l,params:c}),s=a.data?.data??a.data;return t&&t(s,a),d&&n.success(m),s}catch(a){const s=g(a);throw f&&n.error(s.message||"Erro inesperado"),u&&u(s),s}}}function g(r){if(r.response){const{status:o,data:e}=r.response;return{status:o,message:e?.error?.message||e?.message||e?.detail||e?.error||(typeof e?.error=="string"?e.error:null)||`Requisição falhou (${o})`,code:e?.error?.code||null}}return r.request?{message:"Sem resposta do servidor",code:"NO_RESPONSE"}:{message:r.message,code:"UNKNOWN"}}export{y as u};
