import{r as i,j as a}from"./vendor-mRmXoTzJ.js";import{B as F,e as P,f as M,C as j,a as k,b as ae,c as se,g as te,A as re}from"./AppFooter-BYGyZtH7.js";import{I as ie}from"./input-BfKbLbq-.js";import{A as ne,b as le,d as de}from"./index-WsMorp8v.js";import{A as oe,B as D}from"./AppHeader-Doye_i6Z.js";import{f as ce,a as me,g as ue,d as $}from"./lolApi-eHDD5ks5.js";import{u as R,b as xe,g as pe,a as H,f as Q}from"./playerStore-DAbDxbBn.js";import{q as ge,r as he,j as be,T as fe,m as je,s as ke}from"./icons-LK5f2ZN2.js";import{m as U}from"./motion-DeyU0M5x.js";import{a as Ne,u as we}from"./router-b8HoQcXb.js";import"./radix-Ba4cyD9q.js";const u="BR1";function qe(){const V=Ne(),N=we(),s=V.state,d=R(e=>e.player),w=R(e=>e.setPlayer),[o,v]=i.useState((s&&"player"in s?s.player.puuid:s?.puuid)??d?.puuid??null),[m,z]=i.useState((s&&"player"in s?s.player.name:s?.gameName)??d?.gameName??""),[p,y]=i.useState((s&&"player"in s?s.player.tag:s?.tagLine)??d?.tagLine??""),[c,S]=i.useState((s&&"player"in s?s.region??s.player.queueRanks?.[0]?.region:s?.region)??d?.region??u),[h,L]=i.useState([]),[G,T]=i.useState(null),[n,E]=i.useState(!1),[r,C]=i.useState(s?.matches??[]),[K,q]=i.useState(!1),[b,O]=i.useState(""),I=e=>[...e].sort((t,l)=>(l.gameEndTimestamp??0)-(t.gameEndTimestamp??0));i.useEffect(()=>{if(s&&"player"in s){const e=s.player;v(e.puuid),z(e.name),y(e.tag),S(s.region??e.queueRanks?.[0]?.region??u),C(I(s.matches??[])),L((e.queueRanks??[]).map(t=>({queueType:t.queueType,tier:t.tier,rank:t.rank}))),T(e.profileIconId??null),E(!0),w({puuid:e.puuid,gameName:e.name,tagLine:e.tag,region:s.region??e.queueRanks?.[0]?.region??u})}else if(s?.puuid)v(s.puuid),z(s.gameName),y(s.tagLine),S(s.region??u),C(I(s.matches??[])),w({puuid:s.puuid,gameName:s.gameName,tagLine:s.tagLine,region:s.region??u});else{const e=R.getState().getPlayer();e?.puuid&&(v(e.puuid),z(e.gameName),y(e.tagLine),S(e.region??u))}},[s,w]),i.useEffect(()=>{if(s&&"player"in s||!o||n)return;const t=(m||d?.gameName)??"",l=(p||d?.tagLine)??"";!t||!l||ce(t,l,c||u).then(g=>{L((g.queueRanks??[]).map(x=>({queueType:x.queueType,tier:x.tier,rank:x.rank}))),T(g.profileIconId??null)}).catch(()=>{L([]),T(null)}).finally(()=>E(!0))},[s,o,m,p,c,n,d?.gameName,d?.tagLine]),i.useEffect(()=>{!o||!c||!(r.length===0)||(q(!0),me({puuid:o,region:c}).then(t=>C(I(t))).finally(()=>q(!1)))},[o,c,r.length]);const _=(()=>{const e=b.trim()?r.filter(t=>t.champion.toLowerCase().includes(b.toLowerCase())||t.matchId.toLowerCase().includes(b.toLowerCase())):[...r];return e.sort((t,l)=>(l.gameEndTimestamp??0)-(t.gameEndTimestamp??0)),e})(),W=e=>e>=90?"bg-purple-500/20 text-purple-300 dark:text-purple-400 border-purple-500/30":e>=75?"bg-blue-500/20 text-blue-300 dark:text-blue-400 border-blue-500/30":e>=55?"bg-emerald-500/20 text-emerald-300 dark:text-emerald-400 border-emerald-500/30":e>=35?"bg-amber-500/20 text-amber-300 dark:text-amber-400 border-amber-500/30":"bg-red-500/20 text-red-300 dark:text-red-400 border-red-500/30",J=e=>e?"bg-emerald-500/20 text-emerald-300 dark:text-emerald-400 border-emerald-500/30":"bg-red-500/20 text-red-300 dark:text-red-400 border-red-500/30",f=r?.length>0?r.reduce((e,t)=>e+(typeof t.score=="number"?t.score:50),0)/r.length:0,A=f>=90?"S":f>=75?"A":f>=55?"B":f>=35?"C":"D",X=r?.filter(e=>e.result).length??0,B=r?.length>0?Math.round(X/r.length*100):0,Y=r?.length>0?(r.reduce((e,t)=>{const[l,g,x]=t.kda.split("/").map(ee=>parseInt(ee.trim(),10)||0);return e+(g>0?(l+x)/g:l+x)},0)/r.length).toFixed(1):"0",Z=r?.length>0?(r.reduce((e,t)=>e+t.csPerMin,0)/r.length).toFixed(1):"0";return o?a.jsxs("div",{className:"min-h-screen w-full bg-zinc-100 text-zinc-900 transition-colors duration-500 dark:bg-zinc-950 dark:text-zinc-100",children:[a.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 left-1/2 -translate-x-1/2 h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[120px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 h-[400px] w-[400px] rounded-full bg-blue-600/20 blur-[120px]"})]}),a.jsx(oe,{backTo:"/",badgeLabel:"Dashboard",maxWidth:"max-w-7xl"}),a.jsxs("main",{className:"relative z-10 mx-auto max-w-7xl px-6 py-8 space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[n?a.jsxs(ne,{className:"w-12 h-12 border border-white/10",children:[a.jsx(le,{src:`https://ddragon-webp.lolmath.net/latest/img/profileicon/${G??1}.webp`,alt:`${m} avatar`}),a.jsx(de,{className:"bg-purple-500/20 text-purple-300",children:m.slice(0,2).toUpperCase()})]}):a.jsx(P,{className:"w-12 h-12 rounded-full shrink-0"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold",children:[m,"#",p]}),a.jsxs("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Score médio ",A," • ",B,"% taxa de vitória"]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a.jsxs("span",{className:"text-xs text-zinc-500",children:["Região: ",c]}),n&&h.length===0&&a.jsx("span",{className:"text-xs text-amber-500 dark:text-amber-400",children:"Nenhuma fila ranqueada"})]})]})]}),a.jsxs("div",{className:"relative w-full md:w-64",children:[a.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),a.jsx(ie,{placeholder:"Buscar partida por campeão ou ID",value:b,onChange:e=>O(e.target.value),className:"pl-10 bg-zinc-50 border-zinc-200 text-zinc-900 placeholder:text-zinc-500 focus-visible:ring-purple-500 dark:bg-white/5 dark:border-white/10 dark:text-zinc-100 dark:placeholder:text-zinc-500"})]})]}),!n&&a.jsxs("div",{className:"w-full md:w-auto flex flex-wrap gap-3",children:[a.jsx(M,{className:"min-w-[180px] flex-1"}),a.jsx(M,{className:"min-w-[180px] flex-1"})]}),n&&h.length>0&&a.jsx("div",{className:"w-full md:w-auto flex flex-wrap gap-3",children:h.map(e=>a.jsx(j,{className:"flex-1 w-full max-w-full md:w-auto min-w-[180px] md:max-w-[240px] border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:a.jsxs(k,{className:"p-4",children:[a.jsx("div",{className:"text-xs font-medium text-zinc-500 mb-1",children:xe(e.queueType)}),a.jsxs("div",{className:"font-semibold text-purple-600 dark:text-purple-300",children:[e.tier," ",e.rank,e.leaguePoints!=null&&a.jsxs("span",{className:"text-sm font-normal ml-1 text-zinc-600 dark:text-zinc-400",children:[e.leaguePoints," LP"]})]}),(e.wins!=null||e.losses!=null)&&a.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[e.wins??0,"V ",e.losses??0,"D",(e.wins??0)+(e.losses??0)>0&&a.jsxs("span",{className:"ml-1",children:["(",(100*(e.wins??0)/((e.wins??0)+(e.losses??0))).toFixed(0),"%)"]})]})]})},e.queueType))}),n&&h.length===0&&a.jsxs("div",{className:"rounded-xl border p-4 bg-amber-50 border-amber-200 text-amber-800 dark:bg-amber-500/10 dark:border-amber-500/30 dark:text-amber-200",role:"alert",children:[a.jsx("p",{className:"font-medium",children:"Você não está ranqueado em nenhuma fila."}),a.jsx("p",{className:"text-sm mt-1 opacity-90",children:"Os benchmarks por elo estão disponíveis apenas para contas ranqueadas (Solo ou Flex). Suas métricas continuam visíveis; a comparação com o ideal do elo não será exibida."})]}),a.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:n?[{label:"Score médio",value:A,icon:he},{label:"KDA médio",value:Y,icon:be},{label:"CS/min",value:Z,icon:fe},{label:"Taxa de vitória",value:`${B}%`,icon:je}].map((e,t)=>a.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},children:a.jsx(j,{className:"border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:a.jsxs(k,{className:"p-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:e.label}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:e.value})]}),a.jsx(e.icon,{className:"w-5 h-5 text-purple-400"})]})})},t)):Array.from({length:4}).map((e,t)=>a.jsx(j,{className:"border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:a.jsx(k,{className:"p-4 flex justify-between items-center",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(P,{className:"h-4 w-20"}),a.jsx(P,{className:"h-6 w-12"})]})})},t))}),a.jsxs(j,{className:"border-zinc-200/80 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-white/5",children:[a.jsx(ae,{children:a.jsx(se,{className:"text-zinc-900 dark:text-zinc-100",children:"Histórico recente"})}),a.jsx(k,{className:"space-y-3",children:K||!n?a.jsx(te,{count:5}):_.map(e=>(ue(e),a.jsxs(U.div,{whileHover:{y:-2},className:"flex flex-wrap md:flex-nowrap items-center justify-between gap-3 p-4 rounded-xl border border-zinc-200/80 bg-zinc-50/50 hover:bg-zinc-100/80 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10 transition cursor-pointer backdrop-blur-xl",onClick:()=>N(`/match/${e.matchId}`,{state:{puuid:o,gameName:m,tagLine:p,region:c,tier:e.tier??void 0,rank:e.rank??void 0}}),children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:`https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/${e.champion}.png`,alt:"",className:"w-12 h-12 rounded-lg border border-white/10 object-cover bg-zinc-800",onError:t=>{t.target.src=""}}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:e.champion}),a.jsxs("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[e.kda," • ",e.csPerMin," CS/min"]}),a.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[pe(e.queueId),H(e.teamPosition)&&a.jsxs(a.Fragment,{children:[" • ",H(e.teamPosition)]}),Q(e.gameEndTimestamp)&&a.jsxs(a.Fragment,{children:[" • ",Q(e.gameEndTimestamp)]})]}),(e.tier??e.rank)&&$(e)&&a.jsxs("div",{className:"text-xs mt-1 text-purple-600 dark:text-purple-300",children:["Ideal do elo: ",$(e)]})]})]}),a.jsxs("div",{className:"flex w-full md:w-auto justify-end md:justify-start md:items-center gap-3",children:[a.jsx(D,{className:W(typeof e.score=="number"?e.score:50),children:typeof e.score=="number"?e.score:"—"}),a.jsx(D,{className:J(e.result),children:e.result?"Vitória":"Derrota"}),a.jsx(F,{size:"sm",variant:"ghost",className:"text-zinc-600 dark:text-zinc-400 hover:bg-white/10",onClick:t=>{t.stopPropagation(),N(`/match/${e.matchId}`,{state:{puuid:o,gameName:m,tagLine:p,region:c,tier:e.tier??void 0,rank:e.rank??void 0}})},children:a.jsx(ke,{size:16})})]})]},e.matchId)))})]})]}),a.jsx(re,{})]}):a.jsx("div",{className:"min-h-screen w-full bg-zinc-100 text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-zinc-500",children:"Nenhum jogador carregado."}),a.jsx(F,{className:"mt-4",onClick:()=>N("/"),children:"Buscar Riot ID"})]})})}export{qe as default};
