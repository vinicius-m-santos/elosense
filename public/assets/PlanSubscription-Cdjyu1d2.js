import{au as x,j as s}from"./vendor-mRmXoTzJ.js";import{u as d}from"./request-B6uIehoa.js";import{S as p,B as u,C as h,b as g,c as j,a as f,A as y}from"./AppFooter-DFZVLD4-.js";import{R as N,f as v,g as b,h as w}from"./icons-LK5f2ZN2.js";import"./Api-xMS5vTWo.js";import"./index-DpC4sAuN.js";import"./router-b8HoQcXb.js";import"./radix-Ba4cyD9q.js";function B(){const i=d(),{data:r,isLoading:n,error:l,refetch:o,isRefetching:a}=x({queryKey:["subscription","me"],queryFn:async()=>await i({method:"get",url:"/subscription/me",showError:!0}),staleTime:120*1e3,refetchOnMount:"always",retry:2});if(n)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(p,{})});if(l||!r)return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Não foi possível carregar os dados do plano."}),s.jsxs(u,{variant:"outline",onClick:()=>o(),disabled:a,className:"flex items-center gap-2",children:[s.jsx(N,{className:`h-4 w-4 ${a?"animate-spin":""}`}),a?"Carregando...":"Tentar novamente"]})]});const{plan:m,subscription:e,usage:t}=r,c=t.students_limit===null?"Ilimitado":`${t.students_used} / ${t.students_limit}`;return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 tracking-wide mb-6",children:"Plano e Assinatura"}),s.jsxs(h,{children:[s.jsx(g,{children:s.jsxs(j,{className:"flex items-center gap-2 text-lg",children:[s.jsx(v,{className:"h-5 w-5"}),"Plano atual"]})}),s.jsxs(f,{className:"space-y-4",children:[s.jsx("p",{className:"text-xl font-semibold text-gray-800",children:m.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsxs("span",{children:["Alunos: ",c]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(w,{className:"h-4 w-4"}),s.jsxs("span",{children:["Status:"," ",e.status==="active"?"Ativo":e.status==="expired"?"Expirado":e.status]})]}),e.is_lifetime&&s.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Plano vitalício"}),e.ends_at&&!e.is_lifetime&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Válido até:"," ",new Date(e.ends_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]})]})]}),s.jsx("p",{className:"mt-6 text-sm text-gray-500",children:"Em breve teremos planos pagos com mais vagas para alunos. Você será avisado."}),s.jsx(y,{})]})}export{B as default};
